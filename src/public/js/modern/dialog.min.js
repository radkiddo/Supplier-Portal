!function(o){o.Dialog=function(t){if(o.Dialog.opened)return!1
o.Dialog.opened=!0,o.Dialog.settings=t,t=o.extend({position:{zone:"center"},overlay:!0},t)
var i="<div"
i+=t.buttonsAlign?' style=" float: '+t.buttonsAlign+';">':">",o.each(t.buttons,function(o,t){i+="<button>"+o+"</button>",t.action||(t.action=function(){})}),i+="</div>"
var e=['<div id="dialogOverlay">','<div id="dialogBox" class="dialog">','<div class="header"><span>',t.title,"</span>",t.closeButton?'<div><button><i class="icon-cancel-2"></i></button></div>':"","</div>",'<div class="content">',t.content,"</div>",'<div class="action" id="dialogButtons">',i,"</div></div></div>"].join("")
o(e).hide().appendTo("body").fadeIn(),t.overlay||o("#dialogOverlay").css("background-color","rgba(255, 255, 255, 0)"),"left"==t.position.zone?(o("#dialogBox").css("top",Math.max(0,(o(window).height()-o("#dialogBox").outerHeight())/3+o(window).scrollTop())+"px"),o("#dialogBox").css("left",0)):"right"==t.position.zone?(o("#dialogBox").css("top",Math.max(0,(o(window).height()-o("#dialogBox").outerHeight())/3+o(window).scrollTop())+"px"),o("#dialogBox").css("left",Math.max(0,o(window).width()-o("#dialogBox").outerWidth()+o(window).scrollLeft())+"px")):(o("#dialogBox").css("top",t.position.offsetY?t.position.offsetY:Math.max(0,(o(window).height()-o("#dialogBox").outerHeight())/3+o(window).scrollTop())+"px"),o("#dialogBox").css("left",t.position.offsetX?t.position.offsetX:Math.max(0,(o(window).width()-o("#dialogBox").outerWidth())/2+o(window).scrollLeft())+"px")),t.draggable&&o("#dialogBox div.header").css("cursor","move").on("mousedown",function(t){var i=o(this).addClass("active-handle").parent().addClass("draggable"),e=i.css("z-index"),n=i.outerHeight(),a=i.outerWidth(),l=i.offset().top+n-t.pageY,d=i.offset().left+a-t.pageX
i.css("z-index",99999).parents().on("mousemove",function(t){var i=t.pageY>0?t.pageY+l-n:0,s=t.pageX>0?t.pageX+d-a:0
i>=0&&i<=window.innerHeight&&o(".draggable").offset({top:i}),s>=0&&s<=window.innerWidth&&o(".draggable").offset({left:s}),o(".draggable").on("mouseup",function(){o(this).removeClass("draggable").css("z-index",e)})}),t.preventDefault()}).on("mouseup",function(){o(this).removeClass("active-handle").parent().removeClass("draggable")}),o("#dialogBox .header button").click(function(){return o.Dialog.close(),!1})
var n=o("#dialogBox .action button"),a=0
o.each(t.buttons,function(i,e){n.eq(a++).click(function(){var i=e.action()
return t.keepOpened&&0==i?void 0:(o.Dialog.close(),!1)})})},o.Dialog.content=function(t){return o.Dialog.opened?t?(o("#dialogBox .content").html(t),void 0):o("#dialogBox .content").html():!1},o.Dialog.title=function(t){return o.Dialog.opened?t?(o("#dialogBox .header span").html(t),void 0):o("#dialogBox .header span").html():!1},o.Dialog.buttons=function(t){if(!o.Dialog.opened||!t)return!1
var i="<div"
i+=o.Dialog.settings.buttonsAlign?' style=" float: '+o.Dialog.settings.buttonsAlign+';">':">",o.each(t,function(o,t){i+="<button>"+o+"</button>",t.action||(t.action=function(){})}),i+="</div>",o("#dialogButtons").html(i)
var e=o("#dialogBox .action button"),n=0
o.each(t,function(t,i){e.eq(n++).click(function(){return i.action(),o.Dialog.settings.keepOpened||o.Dialog.close(),!1})})},o.Dialog.close=function(){return o.Dialog.opened?(o("#dialogOverlay").fadeOut(function(){o.Dialog.opened=!1,o(this).remove()}),void 0):!1}}(jQuery)
